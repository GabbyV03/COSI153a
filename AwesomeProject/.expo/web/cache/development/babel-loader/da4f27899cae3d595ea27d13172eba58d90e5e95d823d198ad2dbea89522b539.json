{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { useRef, useState } from \"react\";\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nimport LogBox from \"react-native-web/dist/exports/LogBox\";\nimport { useDerivedValue, useSharedValue } from \"react-native-reanimated\";\nimport DraggableFlatList from \"../components/DraggableFlatList\";\nimport { useSafeNestableScrollContainerContext } from \"../context/nestableScrollContainerContext\";\nimport { useNestedAutoScroll } from \"../hooks/useNestedAutoScroll\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nfunction NestableDraggableFlatListInner(props, ref) {\n  var hasSuppressedWarnings = useRef(false);\n  if (!hasSuppressedWarnings.current) {\n    LogBox.ignoreLogs([\"VirtualizedLists should never be nested inside plain ScrollViews with the same orientation because it can break windowing\"]);\n    console.reportErrorsAsExceptions = false;\n    hasSuppressedWarnings.current = true;\n  }\n  var _useSafeNestableScrol = useSafeNestableScrollContainerContext(),\n    scrollableRef = _useSafeNestableScrol.scrollableRef,\n    outerScrollOffset = _useSafeNestableScrol.outerScrollOffset,\n    setOuterScrollEnabled = _useSafeNestableScrol.setOuterScrollEnabled;\n  var listVerticalOffset = useSharedValue(0);\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    animVals = _useState2[0],\n    setAnimVals = _useState2[1];\n  var defaultHoverOffset = useSharedValue(0);\n  var _useState3 = useState(defaultHoverOffset),\n    _useState4 = _slicedToArray(_useState3, 2),\n    listHoverOffset = _useState4[0],\n    setListHoverOffset = _useState4[1];\n  var hoverOffset = useDerivedValue(function () {\n    return listHoverOffset.value + listVerticalOffset.value;\n  }, [listHoverOffset]);\n  useNestedAutoScroll(_objectSpread(_objectSpread({}, animVals), {}, {\n    hoverOffset: hoverOffset\n  }));\n  var onListContainerLayout = useStableCallback(function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var containerRef = _ref.containerRef;\n      var nodeHandle = findNodeHandle(scrollableRef.current);\n      var onSuccess = function onSuccess(_x, y) {\n        listVerticalOffset.value = y;\n      };\n      var onFail = function onFail() {\n        console.log(\"## nested draggable list measure fail\");\n      };\n      containerRef.current.measureLayout(nodeHandle, onSuccess, onFail);\n    });\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  var onDragBegin = useStableCallback(function (params) {\n    var _props$onDragBegin;\n    setOuterScrollEnabled(false);\n    (_props$onDragBegin = props.onDragBegin) === null || _props$onDragBegin === void 0 ? void 0 : _props$onDragBegin.call(props, params);\n  });\n  var onDragEnd = useStableCallback(function (params) {\n    var _props$onDragEnd;\n    setOuterScrollEnabled(true);\n    (_props$onDragEnd = props.onDragEnd) === null || _props$onDragEnd === void 0 ? void 0 : _props$onDragEnd.call(props, params);\n  });\n  var onAnimValInit = useStableCallback(function (params) {\n    var _props$onAnimValInit;\n    setListHoverOffset(params.hoverOffset);\n    setAnimVals(_objectSpread(_objectSpread({}, params), {}, {\n      hoverOffset: hoverOffset\n    }));\n    (_props$onAnimValInit = props.onAnimValInit) === null || _props$onAnimValInit === void 0 ? void 0 : _props$onAnimValInit.call(props, params);\n  });\n  return React.createElement(DraggableFlatList, _extends({\n    ref: ref,\n    onContainerLayout: onListContainerLayout,\n    activationDistance: props.activationDistance || 20,\n    scrollEnabled: false\n  }, props, {\n    outerScrollOffset: outerScrollOffset,\n    onDragBegin: onDragBegin,\n    onDragEnd: onDragEnd,\n    onAnimValInit: onAnimValInit\n  }));\n}\nexport var NestableDraggableFlatList = React.forwardRef(NestableDraggableFlatListInner);","map":{"version":3,"names":["React","useRef","useState","findNodeHandle","LogBox","useDerivedValue","useSharedValue","DraggableFlatList","useSafeNestableScrollContainerContext","useNestedAutoScroll","useStableCallback","NestableDraggableFlatListInner","props","ref","hasSuppressedWarnings","current","ignoreLogs","console","reportErrorsAsExceptions","_useSafeNestableScrol","scrollableRef","outerScrollOffset","setOuterScrollEnabled","listVerticalOffset","_useState","_useState2","_slicedToArray","animVals","setAnimVals","defaultHoverOffset","_useState3","_useState4","listHoverOffset","setListHoverOffset","hoverOffset","value","_objectSpread","onListContainerLayout","_ref2","_asyncToGenerator","_ref","containerRef","nodeHandle","onSuccess","_x","y","onFail","log","measureLayout","_x2","apply","arguments","onDragBegin","params","_props$onDragBegin","call","onDragEnd","_props$onDragEnd","onAnimValInit","_props$onAnimValInit","createElement","_extends","onContainerLayout","activationDistance","scrollEnabled","NestableDraggableFlatList","forwardRef"],"sources":["/Users/gabriellavukomanovic/Desktop/Summer2023/AwesomeProject/node_modules/react-native-draggable-flatlist/lib/module/components/NestableDraggableFlatList.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { findNodeHandle, LogBox } from \"react-native\";\nimport Animated, {\n  useDerivedValue,\n  useSharedValue,\n} from \"react-native-reanimated\";\nimport { DraggableFlatListProps } from \"../types\";\nimport DraggableFlatList from \"../components/DraggableFlatList\";\nimport { useSafeNestableScrollContainerContext } from \"../context/nestableScrollContainerContext\";\nimport { useNestedAutoScroll } from \"../hooks/useNestedAutoScroll\";\nimport { typedMemo } from \"../utils\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport { FlatList } from \"react-native-gesture-handler\";\n\nfunction NestableDraggableFlatListInner<T>(\n  props: DraggableFlatListProps<T>,\n  ref?: React.ForwardedRef<FlatList<T>>\n) {\n  const hasSuppressedWarnings = useRef(false);\n\n  if (!hasSuppressedWarnings.current) {\n    LogBox.ignoreLogs([\n      \"VirtualizedLists should never be nested inside plain ScrollViews with the same orientation because it can break windowing\",\n    ]); // Ignore log notification by message\n    //@ts-ignore\n    console.reportErrorsAsExceptions = false;\n    hasSuppressedWarnings.current = true;\n  }\n\n  const {\n    scrollableRef,\n    outerScrollOffset,\n    setOuterScrollEnabled,\n  } = useSafeNestableScrollContainerContext();\n\n  const listVerticalOffset = useSharedValue(0);\n  const [animVals, setAnimVals] = useState({});\n  const defaultHoverOffset = useSharedValue(0);\n  const [listHoverOffset, setListHoverOffset] = useState(defaultHoverOffset);\n\n  const hoverOffset = useDerivedValue(() => {\n    return listHoverOffset.value + listVerticalOffset.value;\n  }, [listHoverOffset]);\n\n  useNestedAutoScroll({\n    ...animVals,\n    hoverOffset,\n  });\n\n  const onListContainerLayout = useStableCallback(async ({ containerRef }) => {\n    const nodeHandle = findNodeHandle(scrollableRef.current);\n\n    const onSuccess = (_x: number, y: number) => {\n      listVerticalOffset.value = y;\n    };\n    const onFail = () => {\n      console.log(\"## nested draggable list measure fail\");\n    };\n    //@ts-ignore\n    containerRef.current.measureLayout(nodeHandle, onSuccess, onFail);\n  });\n\n  const onDragBegin: DraggableFlatListProps<T>[\"onDragBegin\"] = useStableCallback(\n    (params) => {\n      setOuterScrollEnabled(false);\n      props.onDragBegin?.(params);\n    }\n  );\n\n  const onDragEnd: DraggableFlatListProps<T>[\"onDragEnd\"] = useStableCallback(\n    (params) => {\n      setOuterScrollEnabled(true);\n      props.onDragEnd?.(params);\n    }\n  );\n\n  const onAnimValInit: DraggableFlatListProps<T>[\"onAnimValInit\"] = useStableCallback(\n    (params) => {\n      setListHoverOffset(params.hoverOffset);\n      setAnimVals({\n        ...params,\n        hoverOffset,\n      });\n      props.onAnimValInit?.(params);\n    }\n  );\n\n  return (\n    <DraggableFlatList\n      ref={ref}\n      onContainerLayout={onListContainerLayout}\n      activationDistance={props.activationDistance || 20}\n      scrollEnabled={false}\n      {...props}\n      outerScrollOffset={outerScrollOffset}\n      onDragBegin={onDragBegin}\n      onDragEnd={onDragEnd}\n      onAnimValInit={onAnimValInit}\n    />\n  );\n}\n\n// Generic forwarded ref type assertion taken from:\n// https://fettblog.eu/typescript-react-generic-forward-refs/#option-1%3A-type-assertion\nexport const NestableDraggableFlatList = React.forwardRef(\n  NestableDraggableFlatListInner\n) as <T>(\n  props: DraggableFlatListProps<T> & { ref?: React.ForwardedRef<FlatList<T>> }\n) => ReturnType<typeof NestableDraggableFlatListInner>;\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,OAAxC;AAAA,OAAAC,cAAA;AAAA,OAAAC,MAAA;AAEA,SACEC,eADF,EAEEC,cAFF,QAGO,yBAHP;AAKA,OAAOC,iBAAP;AACA,SAASC,qCAAT;AACA,SAASC,mBAAT;AAEA,SAASC,iBAAT;AAGA,SAASC,8BAATA,CACEC,KADF,EAEEC,GAFF,EAGE;EACA,IAAMC,qBAAqB,GAAGb,MAAM,CAAC,KAAD,CAApC;EAEA,IAAI,CAACa,qBAAqB,CAACC,OAA3B,EAAoC;IAClCX,MAAM,CAACY,UAAP,CAAkB,CAChB,2HADgB,CAAlB;IAIAC,OAAO,CAACC,wBAAR,GAAmC,KAAnC;IACAJ,qBAAqB,CAACC,OAAtB,GAAgC,IAAhC;EACD;EAED,IAAAI,qBAAA,GAIIX,qCAAqC,EAJzC;IACEY,aADI,GAAAD,qBAAA,CACJC,aADI;IAEJC,iBAFI,GAAAF,qBAAA,CAEJE,iBAFI;IAGJC,qBAAA,GAAAH,qBAAA,CAAAG,qBAAA;EAGF,IAAMC,kBAAkB,GAAGjB,cAAc,CAAC,CAAD,CAAzC;EACA,IAAAkB,SAAA,GAAgCtB,QAAQ,CAAC,EAAD,CAAxC;IAAAuB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAOG,QAAD,GAAAF,UAAA;IAAWG,WAAX,GAAAH,UAAA;EACN,IAAMI,kBAAkB,GAAGvB,cAAc,CAAC,CAAD,CAAzC;EACA,IAAAwB,UAAA,GAA8C5B,QAAQ,CAAC2B,kBAAD,CAAtD;IAAAE,UAAA,GAAAL,cAAA,CAAAI,UAAA;IAAOE,eAAD,GAAAD,UAAA;IAAkBE,kBAAlB,GAAAF,UAAA;EAEN,IAAMG,WAAW,GAAG7B,eAAe,CAAC,YAAM;IACxC,OAAO2B,eAAe,CAACG,KAAhB,GAAwBZ,kBAAkB,CAACY,KAAlD;EACD,CAFkC,EAEhC,CAACH,eAAD,CAFgC,CAAnC;EAIAvB,mBAAmB,CAAA2B,aAAA,CAAAA,aAAA,KACdT,QADe;IAElBO,WAAA,EAAAA;EAAA,EAFiB,CAAnB;EAKA,IAAMG,qBAAqB,GAAG3B,iBAAiB;IAAA,IAAA4B,KAAA,GAAAC,iBAAA,CAAC,WAAAC,IAAA,EAA4B;MAAA,IAAnBC,YAAA,GAAmBD,IAAA,CAAnBC,YAAA;MACvD,IAAMC,UAAU,GAAGvC,cAAc,CAACiB,aAAa,CAACL,OAAf,CAAjC;MAEA,IAAM4B,SAAS,GAAG,SAAZA,SAASA,CAAIC,EAAD,EAAaC,CAAb,EAA2B;QAC3CtB,kBAAkB,CAACY,KAAnB,GAA2BU,CAA3B;MACD,CAFD;MAGA,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAA,EAAS;QACnB7B,OAAO,CAAC8B,GAAR,CAAY,uCAAZ;MACD,CAFD;MAIAN,YAAY,CAAC1B,OAAb,CAAqBiC,aAArB,CAAmCN,UAAnC,EAA+CC,SAA/C,EAA0DG,MAA1D;IACD,CAX8C;IAAA,iBAAAG,GAAA;MAAA,OAAAX,KAAA,CAAAY,KAAA,OAAAC,SAAA;IAAA;EAAA,IAA/C;EAaA,IAAMC,WAAqD,GAAG1C,iBAAiB,CAC5E,UAAA2C,MAAD,EAAY;IAAA,IAAAC,kBAAA;IACVhC,qBAAqB,CAAC,KAAD,CAArB;IACA,CAAAgC,kBAAA,GAAA1C,KAAK,CAACwC,WAAN,cAAAE,kBAAA,uBAAAA,kBAAA,CAAAC,IAAA,CAAA3C,KAAK,EAAeyC,MAAf,CAAL;EACD,CAJ4E,CAA/E;EAOA,IAAMG,SAAiD,GAAG9C,iBAAiB,CACxE,UAAA2C,MAAD,EAAY;IAAA,IAAAI,gBAAA;IACVnC,qBAAqB,CAAC,IAAD,CAArB;IACA,CAAAmC,gBAAA,GAAA7C,KAAK,CAAC4C,SAAN,cAAAC,gBAAA,uBAAAA,gBAAA,CAAAF,IAAA,CAAA3C,KAAK,EAAayC,MAAb,CAAL;EACD,CAJwE,CAA3E;EAOA,IAAMK,aAAyD,GAAGhD,iBAAiB,CAChF,UAAA2C,MAAD,EAAY;IAAA,IAAAM,oBAAA;IACV1B,kBAAkB,CAACoB,MAAM,CAACnB,WAAR,CAAlB;IACAN,WAAW,CAAAQ,aAAA,CAAAA,aAAA,KACNiB,MADO;MAEVnB,WAAA,EAAAA;IAAA,EAFS,CAAX;IAIA,CAAAyB,oBAAA,GAAA/C,KAAK,CAAC8C,aAAN,cAAAC,oBAAA,uBAAAA,oBAAA,CAAAJ,IAAA,CAAA3C,KAAK,EAAiByC,MAAjB,CAAL;EACD,CARgF,CAAnF;EAWA,OACErD,KAAA,CAAA4D,aAAA,CAACrD,iBAAD,EAAAsD,QAAA;IACEhD,GAAG,EAAEA,GADP;IAEEiD,iBAAiB,EAAEzB,qBAFrB;IAGE0B,kBAAkB,EAAEnD,KAAK,CAACmD,kBAAN,IAA4B,EAHlD;IAIEC,aAAa,EAAE;EAJjB,GAKMpD,KALN;IAMES,iBAAiB,EAAEA,iBANrB;IAOE+B,WAAW,EAAEA,WAPf;IAQEI,SAAS,EAAEA,SARb;IASEE,aAAa,EAAEA;EATjB,GADF;AAaD;AAID,OAAO,IAAMO,yBAAyB,GAAGjE,KAAK,CAACkE,UAAN,CACvCvD,8BADuC,CAAlC"},"metadata":{},"sourceType":"module","externalDependencies":[]}