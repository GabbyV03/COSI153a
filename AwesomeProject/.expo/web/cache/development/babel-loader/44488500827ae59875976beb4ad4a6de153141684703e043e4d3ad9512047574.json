{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useMemo, useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated, { runOnJS, useAnimatedReaction, useAnimatedStyle } from \"react-native-reanimated\";\nimport { useAnimatedValues } from \"../context/animatedValueContext\";\nimport { useDraggableFlatListContext } from \"../context/draggableFlatListContext\";\nimport { useRefs } from \"../context/refContext\";\nimport { typedMemo } from \"../utils\";\nfunction PlaceholderItem(_ref) {\n  var _propsRef$current;\n  var renderPlaceholder = _ref.renderPlaceholder;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    size = _useState2[0],\n    setSize = _useState2[1];\n  var _useAnimatedValues = useAnimatedValues(),\n    activeCellSize = _useAnimatedValues.activeCellSize,\n    placeholderOffset = _useAnimatedValues.placeholderOffset,\n    spacerIndexAnim = _useAnimatedValues.spacerIndexAnim,\n    horizontalAnim = _useAnimatedValues.horizontalAnim,\n    scrollOffset = _useAnimatedValues.scrollOffset;\n  var _useRefs = useRefs(),\n    keyToIndexRef = _useRefs.keyToIndexRef,\n    propsRef = _useRefs.propsRef;\n  var _useDraggableFlatList = useDraggableFlatListContext(),\n    activeKey = _useDraggableFlatList.activeKey,\n    horizontal = _useDraggableFlatList.horizontal;\n  useAnimatedReaction(function () {\n    return activeCellSize.value;\n  }, function (cur, prev) {\n    if (cur !== prev) {\n      runOnJS(setSize)(cur);\n    }\n  });\n  var activeIndex = activeKey ? keyToIndexRef.current.get(activeKey) : undefined;\n  var activeItem = activeIndex === undefined ? null : (_propsRef$current = propsRef.current) === null || _propsRef$current === void 0 ? void 0 : _propsRef$current.data[activeIndex];\n  var animStyle = useAnimatedStyle(function () {\n    var offset = placeholderOffset.value - scrollOffset.value;\n    return {\n      opacity: size >= 0 ? 1 : 0,\n      overflow: 'hidden',\n      transform: [horizontalAnim.value ? {\n        translateX: offset\n      } : {\n        translateY: offset\n      }]\n    };\n  }, [spacerIndexAnim, placeholderOffset, horizontalAnim, scrollOffset, size]);\n  var extraStyle = useMemo(function () {\n    return horizontal ? {\n      width: size\n    } : {\n      height: size\n    };\n  }, [horizontal, size]);\n  return React.createElement(Animated.View, {\n    pointerEvents: activeKey ? \"auto\" : \"none\",\n    style: [StyleSheet.absoluteFill, animStyle, extraStyle]\n  }, !activeItem || activeIndex === undefined ? null : renderPlaceholder === null || renderPlaceholder === void 0 ? void 0 : renderPlaceholder({\n    item: activeItem,\n    index: activeIndex\n  }));\n}\nexport default typedMemo(PlaceholderItem);","map":{"version":3,"names":["React","useMemo","useState","StyleSheet","Animated","runOnJS","useAnimatedReaction","useAnimatedStyle","useAnimatedValues","useDraggableFlatListContext","useRefs","typedMemo","PlaceholderItem","_ref","_propsRef$current","renderPlaceholder","_useState","_useState2","_slicedToArray","size","setSize","_useAnimatedValues","activeCellSize","placeholderOffset","spacerIndexAnim","horizontalAnim","scrollOffset","_useRefs","keyToIndexRef","propsRef","_useDraggableFlatList","activeKey","horizontal","value","cur","prev","activeIndex","current","get","undefined","activeItem","data","animStyle","offset","opacity","overflow","transform","translateX","translateY","extraStyle","width","height","createElement","View","pointerEvents","style","absoluteFill","item","index"],"sources":["/Users/gabriellavukomanovic/Desktop/Summer2023/AwesomeProject/node_modules/react-native-draggable-flatlist/lib/module/components/PlaceholderItem.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\nimport { useAnimatedValues } from \"../context/animatedValueContext\";\nimport { useDraggableFlatListContext } from \"../context/draggableFlatListContext\";\nimport { useRefs } from \"../context/refContext\";\nimport { RenderPlaceholder } from \"../types\";\nimport { typedMemo } from \"../utils\";\n\ntype Props<T> = {\n  renderPlaceholder?: RenderPlaceholder<T>;\n};\n\nfunction PlaceholderItem<T>({ renderPlaceholder }: Props<T>) {\n  const [size, setSize] = useState(0);\n  const {\n    activeCellSize,\n    placeholderOffset,\n    spacerIndexAnim,\n    horizontalAnim,\n    scrollOffset,\n  } = useAnimatedValues();\n  const { keyToIndexRef, propsRef } = useRefs<T>();\n  const { activeKey, horizontal } = useDraggableFlatListContext();\n\n  // Size does not seem to be respected when it is an animated style\n  useAnimatedReaction(\n    () => {\n      return activeCellSize.value;\n    },\n    (cur, prev) => {\n      if (cur !== prev) {\n        runOnJS(setSize)(cur);\n      }\n    }\n  );\n\n  const activeIndex = activeKey\n    ? keyToIndexRef.current.get(activeKey)\n    : undefined;\n  const activeItem =\n    activeIndex === undefined ? null : propsRef.current?.data[activeIndex];\n\n  const animStyle = useAnimatedStyle(() => {\n    const offset = placeholderOffset.value - scrollOffset.value\n    return {\n        opacity: size >= 0 ? 1 : 0,\n        overflow: 'hidden',\n        transform: [\n          horizontalAnim.value\n            ? { translateX: offset }\n            : { translateY: offset },\n        ],\n      };\n\n  }, [spacerIndexAnim, placeholderOffset, horizontalAnim, scrollOffset, size]);\n\n  const extraStyle = useMemo(() => {\n    return horizontal ? { width: size } : { height: size };\n  }, [horizontal, size])\n\n  return (\n    <Animated.View\n      pointerEvents={activeKey ? \"auto\" : \"none\"}\n      style={[StyleSheet.absoluteFill, animStyle, extraStyle]}\n    >\n      {!activeItem || activeIndex === undefined\n        ? null\n        : renderPlaceholder?.({ item: activeItem, index: activeIndex })}\n    </Animated.View>\n  );\n}\n\nexport default typedMemo(PlaceholderItem);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}