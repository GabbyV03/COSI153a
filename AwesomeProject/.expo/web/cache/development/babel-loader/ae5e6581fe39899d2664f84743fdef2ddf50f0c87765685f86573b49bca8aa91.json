{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { FlatList, Gesture, GestureDetector } from \"react-native-gesture-handler\";\nimport Animated, { runOnJS, useAnimatedReaction, useAnimatedScrollHandler, useSharedValue, withSpring } from \"react-native-reanimated\";\nimport CellRendererComponent from \"./CellRendererComponent\";\nimport { DEFAULT_PROPS } from \"../constants\";\nimport PlaceholderItem from \"./PlaceholderItem\";\nimport RowItem from \"./RowItem\";\nimport PropsProvider from \"../context/propsContext\";\nimport AnimatedValueProvider, { useAnimatedValues } from \"../context/animatedValueContext\";\nimport RefProvider, { useRefs } from \"../context/refContext\";\nimport DraggableFlatListProvider from \"../context/draggableFlatListContext\";\nimport { useAutoScroll } from \"../hooks/useAutoScroll\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport ScrollOffsetListener from \"./ScrollOffsetListener\";\nimport { typedMemo } from \"../utils\";\nvar AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\nfunction DraggableFlatListInner(props) {\n  var _useRefs = useRefs(),\n    cellDataRef = _useRefs.cellDataRef,\n    containerRef = _useRefs.containerRef,\n    flatlistRef = _useRefs.flatlistRef,\n    keyToIndexRef = _useRefs.keyToIndexRef,\n    propsRef = _useRefs.propsRef,\n    animationConfigRef = _useRefs.animationConfigRef;\n  var _useAnimatedValues = useAnimatedValues(),\n    activeCellOffset = _useAnimatedValues.activeCellOffset,\n    activeCellSize = _useAnimatedValues.activeCellSize,\n    activeIndexAnim = _useAnimatedValues.activeIndexAnim,\n    containerSize = _useAnimatedValues.containerSize,\n    scrollOffset = _useAnimatedValues.scrollOffset,\n    scrollViewSize = _useAnimatedValues.scrollViewSize,\n    spacerIndexAnim = _useAnimatedValues.spacerIndexAnim,\n    horizontalAnim = _useAnimatedValues.horizontalAnim,\n    placeholderOffset = _useAnimatedValues.placeholderOffset,\n    touchTranslate = _useAnimatedValues.touchTranslate,\n    autoScrollDistance = _useAnimatedValues.autoScrollDistance,\n    panGestureState = _useAnimatedValues.panGestureState,\n    isTouchActiveNative = _useAnimatedValues.isTouchActiveNative,\n    viewableIndexMin = _useAnimatedValues.viewableIndexMin,\n    viewableIndexMax = _useAnimatedValues.viewableIndexMax,\n    disabled = _useAnimatedValues.disabled;\n  var reset = useStableCallback(function () {\n    activeIndexAnim.value = -1;\n    spacerIndexAnim.value = -1;\n    touchTranslate.value = 0;\n    activeCellSize.value = -1;\n    activeCellOffset.value = -1;\n    setActiveKey(null);\n  });\n  var _props$dragHitSlop = props.dragHitSlop,\n    dragHitSlop = _props$dragHitSlop === void 0 ? DEFAULT_PROPS.dragHitSlop : _props$dragHitSlop,\n    _props$scrollEnabled = props.scrollEnabled,\n    scrollEnabled = _props$scrollEnabled === void 0 ? DEFAULT_PROPS.scrollEnabled : _props$scrollEnabled,\n    _props$activationDist = props.activationDistance,\n    activationDistanceProp = _props$activationDist === void 0 ? DEFAULT_PROPS.activationDistance : _props$activationDist;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    activeKey = _useState2[0],\n    setActiveKey = _useState2[1];\n  var _useState3 = useState(!propsRef.current.enableLayoutAnimationExperimental),\n    _useState4 = _slicedToArray(_useState3, 2),\n    layoutAnimationDisabled = _useState4[0],\n    setLayoutAnimationDisabled = _useState4[1];\n  var keyExtractor = useStableCallback(function (item, index) {\n    if (!props.keyExtractor) {\n      throw new Error(\"You must provide a keyExtractor to DraggableFlatList\");\n    }\n    return props.keyExtractor(item, index);\n  });\n  var dataRef = useRef(props.data);\n  var dataHasChanged = dataRef.current.map(keyExtractor).join(\"\") !== props.data.map(keyExtractor).join(\"\");\n  dataRef.current = props.data;\n  if (dataHasChanged) {\n    activeKey = null;\n  }\n  useEffect(function () {\n    if (!propsRef.current.enableLayoutAnimationExperimental) return;\n    if (activeKey) {\n      setLayoutAnimationDisabled(true);\n    } else {\n      setTimeout(function () {\n        setLayoutAnimationDisabled(false);\n      }, 100);\n    }\n  }, [activeKey]);\n  useLayoutEffect(function () {\n    props.data.forEach(function (d, i) {\n      var key = keyExtractor(d, i);\n      keyToIndexRef.current.set(key, i);\n    });\n  }, [props.data, keyExtractor, keyToIndexRef]);\n  var drag = useStableCallback(function (activeKey) {\n    if (disabled.value) return;\n    var index = keyToIndexRef.current.get(activeKey);\n    var cellData = cellDataRef.current.get(activeKey);\n    if (cellData) {\n      activeCellOffset.value = cellData.measurements.offset;\n      activeCellSize.value = cellData.measurements.size;\n    }\n    var onDragBegin = propsRef.current.onDragBegin;\n    if (index !== undefined) {\n      spacerIndexAnim.value = index;\n      activeIndexAnim.value = index;\n      setActiveKey(activeKey);\n      onDragBegin === null || onDragBegin === void 0 ? void 0 : onDragBegin(index);\n    }\n  });\n  var onContainerLayout = function onContainerLayout(_ref) {\n    var _props$onContainerLay;\n    var layout = _ref.nativeEvent.layout;\n    var width = layout.width,\n      height = layout.height;\n    containerSize.value = props.horizontal ? width : height;\n    (_props$onContainerLay = props.onContainerLayout) === null || _props$onContainerLay === void 0 ? void 0 : _props$onContainerLay.call(props, {\n      layout: layout,\n      containerRef: containerRef\n    });\n  };\n  var onListContentSizeChange = function onListContentSizeChange(w, h) {\n    var _props$onContentSizeC;\n    scrollViewSize.value = props.horizontal ? w : h;\n    (_props$onContentSizeC = props.onContentSizeChange) === null || _props$onContentSizeC === void 0 ? void 0 : _props$onContentSizeC.call(props, w, h);\n  };\n  var onContainerTouchStart = function onContainerTouchStart() {\n    if (!disabled.value) {\n      isTouchActiveNative.value = true;\n    }\n    return false;\n  };\n  var onContainerTouchEnd = function onContainerTouchEnd() {\n    isTouchActiveNative.value = false;\n  };\n  var extraData = useMemo(function () {\n    return {\n      activeKey: activeKey,\n      extraData: props.extraData\n    };\n  }, [activeKey, props.extraData]);\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item,\n      index = _ref2.index;\n    var key = keyExtractor(item, index);\n    if (index !== keyToIndexRef.current.get(key)) {\n      keyToIndexRef.current.set(key, index);\n    }\n    return React.createElement(RowItem, {\n      item: item,\n      itemKey: key,\n      renderItem: props.renderItem,\n      drag: drag,\n      extraData: props.extraData\n    });\n  }, [props.renderItem, props.extraData, drag, keyExtractor]);\n  var onRelease = useStableCallback(function (index) {\n    var _props$onRelease;\n    (_props$onRelease = props.onRelease) === null || _props$onRelease === void 0 ? void 0 : _props$onRelease.call(props, index);\n  });\n  var onDragEnd = useStableCallback(function (_ref3) {\n    var from = _ref3.from,\n      to = _ref3.to;\n    var onDragEnd = props.onDragEnd,\n      data = props.data;\n    var newData = _toConsumableArray(data);\n    if (from !== to) {\n      newData.splice(from, 1);\n      newData.splice(to, 0, data[from]);\n    }\n    onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd({\n      from: from,\n      to: to,\n      data: newData\n    });\n    reset();\n  });\n  var onPlaceholderIndexChange = useStableCallback(function (index) {\n    var _props$onPlaceholderI;\n    (_props$onPlaceholderI = props.onPlaceholderIndexChange) === null || _props$onPlaceholderI === void 0 ? void 0 : _props$onPlaceholderI.call(props, index);\n  });\n  useAnimatedReaction(function () {\n    return isTouchActiveNative.value;\n  }, function (cur, prev) {\n    if (cur !== prev && !cur) {\n      var hasMoved = !!touchTranslate.value;\n      if (!hasMoved && activeIndexAnim.value >= 0 && !disabled.value) {\n        runOnJS(onRelease)(activeIndexAnim.value);\n        runOnJS(onDragEnd)({\n          from: activeIndexAnim.value,\n          to: spacerIndexAnim.value\n        });\n      }\n    }\n  }, [isTouchActiveNative, onDragEnd, onRelease]);\n  useAnimatedReaction(function () {\n    return spacerIndexAnim.value;\n  }, function (cur, prev) {\n    if (prev !== null && cur !== prev && cur >= 0 && prev >= 0) {\n      runOnJS(onPlaceholderIndexChange)(cur);\n    }\n  }, [spacerIndexAnim]);\n  var gestureDisabled = useSharedValue(false);\n  var panGesture = Gesture.Pan().onBegin(function (evt) {\n    gestureDisabled.value = disabled.value;\n    if (gestureDisabled.value) return;\n    panGestureState.value = evt.state;\n  }).onUpdate(function (evt) {\n    if (gestureDisabled.value) return;\n    panGestureState.value = evt.state;\n    var translation = horizontalAnim.value ? evt.translationX : evt.translationY;\n    touchTranslate.value = translation;\n  }).onEnd(function (evt) {\n    if (gestureDisabled.value) return;\n    isTouchActiveNative.value = false;\n    var translation = horizontalAnim.value ? evt.translationX : evt.translationY;\n    touchTranslate.value = translation + autoScrollDistance.value;\n    panGestureState.value = evt.state;\n    if (activeIndexAnim.value === -1 || disabled.value) return;\n    disabled.value = true;\n    runOnJS(onRelease)(activeIndexAnim.value);\n    var springTo = placeholderOffset.value - activeCellOffset.value;\n    touchTranslate.value = withSpring(springTo, animationConfigRef.current, function () {\n      runOnJS(onDragEnd)({\n        from: activeIndexAnim.value,\n        to: spacerIndexAnim.value\n      });\n      disabled.value = false;\n    });\n  }).onTouchesDown(function () {\n    runOnJS(onContainerTouchStart)();\n  }).onTouchesUp(function () {\n    runOnJS(onContainerTouchEnd)();\n  });\n  if (dragHitSlop) panGesture.hitSlop(dragHitSlop);\n  if (activationDistanceProp) {\n    var activeOffset = [-activationDistanceProp, activationDistanceProp];\n    if (props.horizontal) {\n      panGesture.activeOffsetX(activeOffset);\n    } else {\n      panGesture.activeOffsetY(activeOffset);\n    }\n  }\n  var _onScroll = useStableCallback(function (scrollOffset) {\n    var _props$onScrollOffset;\n    (_props$onScrollOffset = props.onScrollOffsetChange) === null || _props$onScrollOffset === void 0 ? void 0 : _props$onScrollOffset.call(props, scrollOffset);\n  });\n  var scrollHandler = useAnimatedScrollHandler({\n    onScroll: function onScroll(evt) {\n      scrollOffset.value = horizontalAnim.value ? evt.contentOffset.x : evt.contentOffset.y;\n      runOnJS(_onScroll)(scrollOffset.value);\n    }\n  }, [horizontalAnim]);\n  useAutoScroll();\n  var onViewableItemsChanged = useStableCallback(function (info) {\n    var _props$onViewableItem;\n    var viewableIndices = info.viewableItems.filter(function (item) {\n      return item.isViewable;\n    }).map(function (item) {\n      return item.index;\n    }).filter(function (index) {\n      return typeof index === \"number\";\n    });\n    var min = Math.min.apply(Math, _toConsumableArray(viewableIndices));\n    var max = Math.max.apply(Math, _toConsumableArray(viewableIndices));\n    viewableIndexMin.value = min;\n    viewableIndexMax.value = max;\n    (_props$onViewableItem = props.onViewableItemsChanged) === null || _props$onViewableItem === void 0 ? void 0 : _props$onViewableItem.call(props, info);\n  });\n  return React.createElement(DraggableFlatListProvider, {\n    activeKey: activeKey,\n    keyExtractor: keyExtractor,\n    horizontal: !!props.horizontal,\n    layoutAnimationDisabled: layoutAnimationDisabled\n  }, React.createElement(GestureDetector, {\n    gesture: panGesture\n  }, React.createElement(Animated.View, {\n    style: props.containerStyle,\n    ref: containerRef,\n    onLayout: onContainerLayout\n  }, props.renderPlaceholder && React.createElement(PlaceholderItem, {\n    renderPlaceholder: props.renderPlaceholder\n  }), React.createElement(AnimatedFlatList, _extends({}, props, {\n    data: props.data,\n    onViewableItemsChanged: onViewableItemsChanged,\n    CellRendererComponent: CellRendererComponent,\n    ref: flatlistRef,\n    onContentSizeChange: onListContentSizeChange,\n    scrollEnabled: !activeKey && scrollEnabled,\n    renderItem: renderItem,\n    extraData: extraData,\n    keyExtractor: keyExtractor,\n    onScroll: scrollHandler,\n    scrollEventThrottle: 16,\n    simultaneousHandlers: props.simultaneousHandlers,\n    removeClippedSubviews: false\n  })), !!props.onScrollOffsetChange && React.createElement(ScrollOffsetListener, {\n    onScrollOffsetChange: props.onScrollOffsetChange,\n    scrollOffset: scrollOffset\n  }))));\n}\nfunction DraggableFlatList(props, ref) {\n  return React.createElement(PropsProvider, props, React.createElement(AnimatedValueProvider, null, React.createElement(RefProvider, {\n    flatListRef: ref\n  }, React.createElement(MemoizedInner, props))));\n}\nvar MemoizedInner = typedMemo(DraggableFlatListInner);\nexport default React.forwardRef(DraggableFlatList);","map":{"version":3,"names":["React","useCallback","useEffect","useLayoutEffect","useMemo","useRef","useState","FlatList","Gesture","GestureDetector","Animated","runOnJS","useAnimatedReaction","useAnimatedScrollHandler","useSharedValue","withSpring","CellRendererComponent","DEFAULT_PROPS","PlaceholderItem","RowItem","PropsProvider","AnimatedValueProvider","useAnimatedValues","RefProvider","useRefs","DraggableFlatListProvider","useAutoScroll","useStableCallback","ScrollOffsetListener","typedMemo","AnimatedFlatList","createAnimatedComponent","DraggableFlatListInner","props","_useRefs","cellDataRef","containerRef","flatlistRef","keyToIndexRef","propsRef","animationConfigRef","_useAnimatedValues","activeCellOffset","activeCellSize","activeIndexAnim","containerSize","scrollOffset","scrollViewSize","spacerIndexAnim","horizontalAnim","placeholderOffset","touchTranslate","autoScrollDistance","panGestureState","isTouchActiveNative","viewableIndexMin","viewableIndexMax","disabled","reset","value","setActiveKey","_props$dragHitSlop","dragHitSlop","_props$scrollEnabled","scrollEnabled","_props$activationDist","activationDistance","activationDistanceProp","_useState","_useState2","_slicedToArray","activeKey","_useState3","current","enableLayoutAnimationExperimental","_useState4","layoutAnimationDisabled","setLayoutAnimationDisabled","keyExtractor","item","index","Error","dataRef","data","dataHasChanged","map","join","setTimeout","forEach","d","i","key","set","drag","get","cellData","measurements","offset","size","onDragBegin","undefined","onContainerLayout","_ref","_props$onContainerLay","layout","nativeEvent","width","height","horizontal","call","onListContentSizeChange","w","h","_props$onContentSizeC","onContentSizeChange","onContainerTouchStart","onContainerTouchEnd","extraData","renderItem","_ref2","createElement","itemKey","onRelease","_props$onRelease","onDragEnd","_ref3","from","to","newData","_toConsumableArray","splice","onPlaceholderIndexChange","_props$onPlaceholderI","cur","prev","hasMoved","gestureDisabled","panGesture","Pan","onBegin","evt","state","onUpdate","translation","translationX","translationY","onEnd","springTo","onTouchesDown","onTouchesUp","hitSlop","activeOffset","activeOffsetX","activeOffsetY","onScroll","_props$onScrollOffset","onScrollOffsetChange","scrollHandler","contentOffset","x","y","onViewableItemsChanged","info","_props$onViewableItem","viewableIndices","viewableItems","filter","isViewable","min","Math","apply","max","gesture","View","style","containerStyle","ref","onLayout","renderPlaceholder","_extends","scrollEventThrottle","simultaneousHandlers","removeClippedSubviews","DraggableFlatList","flatListRef","MemoizedInner","forwardRef"],"sources":["/Users/gabriellavukomanovic/Desktop/Summer2023/AwesomeProject/node_modules/react-native-draggable-flatlist/lib/module/components/DraggableFlatList.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { ListRenderItem, FlatListProps, LayoutChangeEvent } from \"react-native\";\nimport {\n  FlatList,\n  Gesture,\n  GestureDetector,\n} from \"react-native-gesture-handler\";\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedScrollHandler,\n  useSharedValue,\n  withSpring,\n} from \"react-native-reanimated\";\nimport CellRendererComponent from \"./CellRendererComponent\";\nimport { DEFAULT_PROPS, isWeb } from \"../constants\";\nimport PlaceholderItem from \"./PlaceholderItem\";\nimport RowItem from \"./RowItem\";\nimport { DraggableFlatListProps } from \"../types\";\nimport PropsProvider from \"../context/propsContext\";\nimport AnimatedValueProvider, {\n  useAnimatedValues,\n} from \"../context/animatedValueContext\";\nimport RefProvider, { useRefs } from \"../context/refContext\";\nimport DraggableFlatListProvider from \"../context/draggableFlatListContext\";\nimport { useAutoScroll } from \"../hooks/useAutoScroll\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\nimport ScrollOffsetListener from \"./ScrollOffsetListener\";\nimport { typedMemo } from \"../utils\";\n\ntype RNGHFlatListProps<T> = Animated.AnimateProps<\n  FlatListProps<T> & {\n    ref: React.Ref<FlatList<T>>;\n    simultaneousHandlers?: React.Ref<any> | React.Ref<any>[];\n  }\n>;\n\ntype OnViewableItemsChangedCallback<T> = Exclude<\n  FlatListProps<T>[\"onViewableItemsChanged\"],\n  undefined | null\n>;\n\nconst AnimatedFlatList = (Animated.createAnimatedComponent(\n  FlatList\n) as unknown) as <T>(props: RNGHFlatListProps<T>) => React.ReactElement;\n\nfunction DraggableFlatListInner<T>(props: DraggableFlatListProps<T>) {\n  const {\n    cellDataRef,\n    containerRef,\n    flatlistRef,\n    keyToIndexRef,\n    propsRef,\n    animationConfigRef,\n  } = useRefs<T>();\n  const {\n    activeCellOffset,\n    activeCellSize,\n    activeIndexAnim,\n    containerSize,\n    scrollOffset,\n    scrollViewSize,\n    spacerIndexAnim,\n    horizontalAnim,\n    placeholderOffset,\n    touchTranslate,\n    autoScrollDistance,\n    panGestureState,\n    isTouchActiveNative,\n    viewableIndexMin,\n    viewableIndexMax,\n    disabled,\n  } = useAnimatedValues();\n\n  const reset = useStableCallback(() => {\n    activeIndexAnim.value = -1;\n    spacerIndexAnim.value = -1;\n    touchTranslate.value = 0;\n    activeCellSize.value = -1;\n    activeCellOffset.value = -1;\n    setActiveKey(null);\n  });\n\n  const {\n    dragHitSlop = DEFAULT_PROPS.dragHitSlop,\n    scrollEnabled = DEFAULT_PROPS.scrollEnabled,\n    activationDistance: activationDistanceProp = DEFAULT_PROPS.activationDistance,\n  } = props;\n\n  let [activeKey, setActiveKey] = useState<string | null>(null);\n  const [layoutAnimationDisabled, setLayoutAnimationDisabled] = useState(\n    !propsRef.current.enableLayoutAnimationExperimental\n  );\n\n  const keyExtractor = useStableCallback((item: T, index: number) => {\n    if (!props.keyExtractor) {\n      throw new Error(\"You must provide a keyExtractor to DraggableFlatList\");\n    }\n    return props.keyExtractor(item, index);\n  });\n\n  const dataRef = useRef(props.data);\n  const dataHasChanged =\n    dataRef.current.map(keyExtractor).join(\"\") !==\n    props.data.map(keyExtractor).join(\"\");\n  dataRef.current = props.data;\n  if (dataHasChanged) {\n    // When data changes make sure `activeKey` is nulled out in the same render pass\n    activeKey = null;\n  }\n\n  useEffect(() => {\n    if (!propsRef.current.enableLayoutAnimationExperimental) return;\n    if (activeKey) {\n      setLayoutAnimationDisabled(true);\n    } else {\n      // setTimeout result of trial-and-error to determine how long to wait before\n      // re-enabling layout animations so that a drag reorder does not trigger it.\n      setTimeout(() => {\n        setLayoutAnimationDisabled(false);\n      }, 100);\n    }\n  }, [activeKey]);\n\n  useLayoutEffect(() => {\n    props.data.forEach((d, i) => {\n      const key = keyExtractor(d, i);\n      keyToIndexRef.current.set(key, i);\n    });\n  }, [props.data, keyExtractor, keyToIndexRef]);\n\n  const drag = useStableCallback((activeKey: string) => {\n    if (disabled.value) return;\n    const index = keyToIndexRef.current.get(activeKey);\n    const cellData = cellDataRef.current.get(activeKey);\n    if (cellData) {\n      activeCellOffset.value = cellData.measurements.offset;\n      activeCellSize.value = cellData.measurements.size;\n    }\n\n    const { onDragBegin } = propsRef.current;\n    if (index !== undefined) {\n      spacerIndexAnim.value = index;\n      activeIndexAnim.value = index;\n      setActiveKey(activeKey);\n      onDragBegin?.(index);\n    }\n  });\n\n  const onContainerLayout = ({\n    nativeEvent: { layout },\n  }: LayoutChangeEvent) => {\n    const { width, height } = layout;\n    containerSize.value = props.horizontal ? width : height;\n    props.onContainerLayout?.({ layout, containerRef });\n  };\n\n  const onListContentSizeChange = (w: number, h: number) => {\n    scrollViewSize.value = props.horizontal ? w : h;\n    props.onContentSizeChange?.(w, h);\n  };\n\n  const onContainerTouchStart = () => {\n    if (!disabled.value) {\n      isTouchActiveNative.value = true;\n    }\n    return false;\n  };\n\n  const onContainerTouchEnd = () => {\n    isTouchActiveNative.value = false;\n  };\n\n  const extraData = useMemo(\n    () => ({\n      activeKey,\n      extraData: props.extraData,\n    }),\n    [activeKey, props.extraData]\n  );\n\n  const renderItem: ListRenderItem<T> = useCallback(\n    ({ item, index }) => {\n      const key = keyExtractor(item, index);\n      if (index !== keyToIndexRef.current.get(key)) {\n        keyToIndexRef.current.set(key, index);\n      }\n\n      return (\n        <RowItem\n          item={item}\n          itemKey={key}\n          renderItem={props.renderItem}\n          drag={drag}\n          extraData={props.extraData}\n        />\n      );\n    },\n    [props.renderItem, props.extraData, drag, keyExtractor]\n  );\n\n  const onRelease = useStableCallback((index: number) => {\n    props.onRelease?.(index);\n  });\n\n  const onDragEnd = useStableCallback(\n    ({ from, to }: { from: number; to: number }) => {\n      const { onDragEnd, data } = props;\n\n      const newData = [...data];\n      if (from !== to) {\n        newData.splice(from, 1);\n        newData.splice(to, 0, data[from]);\n      }\n\n      onDragEnd?.({ from, to, data: newData });\n      reset();\n    }\n  );\n\n  const onPlaceholderIndexChange = useStableCallback((index: number) => {\n    props.onPlaceholderIndexChange?.(index);\n  });\n\n  // Handle case where user ends drag without moving their finger.\n  useAnimatedReaction(\n    () => {\n      return isTouchActiveNative.value;\n    },\n    (cur, prev) => {\n      if (cur !== prev && !cur) {\n        const hasMoved = !!touchTranslate.value;\n        if (!hasMoved && activeIndexAnim.value >= 0 && !disabled.value) {\n          runOnJS(onRelease)(activeIndexAnim.value);\n          runOnJS(onDragEnd)({\n            from: activeIndexAnim.value,\n            to: spacerIndexAnim.value,\n          });\n        }\n      }\n    },\n    [isTouchActiveNative, onDragEnd, onRelease]\n  );\n\n  useAnimatedReaction(\n    () => {\n      return spacerIndexAnim.value;\n    },\n    (cur, prev) => {\n      if (prev !== null && cur !== prev && cur >= 0 && prev >= 0) {\n        runOnJS(onPlaceholderIndexChange)(cur);\n      }\n    },\n    [spacerIndexAnim]\n  );\n\n  const gestureDisabled = useSharedValue(false);\n\n  const panGesture = Gesture.Pan()\n    .onBegin((evt) => {\n      gestureDisabled.value = disabled.value;\n      if (gestureDisabled.value) return;\n      panGestureState.value = evt.state;\n    })\n    .onUpdate((evt) => {\n      if (gestureDisabled.value) return;\n      panGestureState.value = evt.state;\n      const translation = horizontalAnim.value\n        ? evt.translationX\n        : evt.translationY;\n      touchTranslate.value = translation;\n    })\n    .onEnd((evt) => {\n      if (gestureDisabled.value) return;\n      // Set touch val to current translate val\n      isTouchActiveNative.value = false;\n      const translation = horizontalAnim.value\n        ? evt.translationX\n        : evt.translationY;\n\n      touchTranslate.value = translation + autoScrollDistance.value;\n      panGestureState.value = evt.state;\n\n      // Only call onDragEnd if actually dragging a cell\n      if (activeIndexAnim.value === -1 || disabled.value) return;\n      disabled.value = true;\n      runOnJS(onRelease)(activeIndexAnim.value);\n      const springTo = placeholderOffset.value - activeCellOffset.value;\n      touchTranslate.value = withSpring(\n        springTo,\n        animationConfigRef.current,\n        () => {\n          runOnJS(onDragEnd)({\n            from: activeIndexAnim.value,\n            to: spacerIndexAnim.value,\n          });\n          disabled.value = false;\n        }\n      );\n    })\n    .onTouchesDown(() => {\n      runOnJS(onContainerTouchStart)();\n    })\n    .onTouchesUp(() => {\n      // Turning this into a worklet causes timing issues. We want it to run\n      // just after the finger lifts.\n      runOnJS(onContainerTouchEnd)();\n    });\n\n  if (dragHitSlop) panGesture.hitSlop(dragHitSlop);\n  if (activationDistanceProp) {\n    const activeOffset = [-activationDistanceProp, activationDistanceProp];\n    if (props.horizontal) {\n      panGesture.activeOffsetX(activeOffset);\n    } else {\n      panGesture.activeOffsetY(activeOffset);\n    }\n  }\n\n  const onScroll = useStableCallback((scrollOffset: number) => {\n    props.onScrollOffsetChange?.(scrollOffset);\n  });\n\n  const scrollHandler = useAnimatedScrollHandler(\n    {\n      onScroll: (evt) => {\n        scrollOffset.value = horizontalAnim.value\n          ? evt.contentOffset.x\n          : evt.contentOffset.y;\n        runOnJS(onScroll)(scrollOffset.value);\n      },\n    },\n    [horizontalAnim]\n  );\n\n  useAutoScroll();\n\n  const onViewableItemsChanged = useStableCallback<\n    OnViewableItemsChangedCallback<T>\n  >((info) => {\n    const viewableIndices = info.viewableItems\n      .filter((item) => item.isViewable)\n      .map((item) => item.index)\n      .filter((index): index is number => typeof index === \"number\");\n\n    const min = Math.min(...viewableIndices);\n    const max = Math.max(...viewableIndices);\n    viewableIndexMin.value = min;\n    viewableIndexMax.value = max;\n    props.onViewableItemsChanged?.(info);\n  });\n\n  return (\n    <DraggableFlatListProvider\n      activeKey={activeKey}\n      keyExtractor={keyExtractor}\n      horizontal={!!props.horizontal}\n      layoutAnimationDisabled={layoutAnimationDisabled}\n    >\n      <GestureDetector gesture={panGesture}>\n        <Animated.View\n          style={props.containerStyle}\n          ref={containerRef}\n          onLayout={onContainerLayout}\n        >\n          {props.renderPlaceholder && (\n            <PlaceholderItem renderPlaceholder={props.renderPlaceholder} />\n          )}\n          <AnimatedFlatList\n            {...props}\n            data={props.data}\n            onViewableItemsChanged={onViewableItemsChanged}\n            CellRendererComponent={CellRendererComponent}\n            ref={flatlistRef}\n            onContentSizeChange={onListContentSizeChange}\n            scrollEnabled={!activeKey && scrollEnabled}\n            renderItem={renderItem}\n            extraData={extraData}\n            keyExtractor={keyExtractor}\n            onScroll={scrollHandler}\n            scrollEventThrottle={16}\n            simultaneousHandlers={props.simultaneousHandlers}\n            removeClippedSubviews={false}\n          />\n          {!!props.onScrollOffsetChange && (\n            <ScrollOffsetListener\n              onScrollOffsetChange={props.onScrollOffsetChange}\n              scrollOffset={scrollOffset}\n            />\n          )}\n        </Animated.View>\n      </GestureDetector>\n    </DraggableFlatListProvider>\n  );\n}\n\nfunction DraggableFlatList<T>(\n  props: DraggableFlatListProps<T>,\n  ref?: React.ForwardedRef<FlatList<T>> | null\n) {\n  return (\n    <PropsProvider {...props}>\n      <AnimatedValueProvider>\n        <RefProvider flatListRef={ref}>\n          <MemoizedInner {...props} />\n        </RefProvider>\n      </AnimatedValueProvider>\n    </PropsProvider>\n  );\n}\n\nconst MemoizedInner = typedMemo(DraggableFlatListInner);\n\n// Generic forwarded ref type assertion taken from:\n// https://fettblog.eu/typescript-react-generic-forward-refs/#option-1%3A-type-assertion\nexport default React.forwardRef(DraggableFlatList) as <T>(\n  props: DraggableFlatListProps<T> & { ref?: React.ForwardedRef<FlatList<T>> }\n) => ReturnType<typeof DraggableFlatList>;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}